<div class="container">
  <div class="header">
    <h1>Liste des Comptes</h1>
    <a routerLink="/comptes/new" class="btn btn-primary">
      <i class="icon">+</i> Nouveau Compte
    </a>
  </div>

  @if (comptes().length > 0) {
    <div class="summary-cards">
      <div class="summary-card">
        <div class="summary-icon">üè¶</div>
        <div class="summary-content">
          <div class="summary-label">Total Comptes</div>
          <div class="summary-value">{{ comptes().length }}</div>
        </div>
      </div>
      <div class="summary-card">
        <div class="summary-icon">üí∞</div>
        <div class="summary-content">
          <div class="summary-label">Solde Total</div>
          <div class="summary-value">{{ getTotalSolde() | number:'1.2-2' }} FCFA</div>
        </div>
      </div>
    </div>
  }

  @if (loading()) {
    <div class="loading">Chargement...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && comptes().length === 0) {
    <div class="empty">Aucun compte trouv√©</div>
  }

  @if (!loading() && comptes().length > 0) {
    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th>N¬∞ Compte</th>
            <th>Type</th>
            <th>Client</th>
            <th>Solde</th>
            <th>Date Cr√©ation</th>
            <th>D√©tails</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (compte of comptes(); track compte.id) {
            <tr>
              <td><strong>{{ compte.numeroCompte }}</strong></td>
              <td>
                <span [class]="'badge badge-' + (compte.type === 'COURANT' ? 'primary' : 'success')">
                  {{ compte.type }}
                </span>
              </td>
              <td>{{ compte.clientNom }} {{ compte.clientPrenom }}</td>
              <td class="solde">{{ compte.solde | number:'1.2-2' }} FCFA</td>
              <td>{{ compte.dateCreation | date:'dd/MM/yyyy' }}</td>
              <td>
                @if (compte.type === 'COURANT' && compte.decouvertAutorise) {
                  <span class="detail-info">D√©couvert: {{ compte.decouvertAutorise | number:'1.2-2' }} FCFA</span>
                }
                @if (compte.type === 'EPARGNE' && compte.tauxInteret) {
                  <span class="detail-info">Taux: {{ compte.tauxInteret }}%</span>
                }
              </td>
              <td class="actions">
                <a [routerLink]="['/comptes', compte.id]" class="btn btn-sm btn-info">D√©tails</a>
                <button (click)="deleteCompte(compte.id!)" class="btn btn-sm btn-danger">Supprimer</button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
